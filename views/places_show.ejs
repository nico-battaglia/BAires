<%- include('./partials/header'); %> <!--  partial included here -->

<%- include ("partials/navbar") %>

<div class="container-lg my-4">
	<div class="row">
		<div class="col-md-8 text-center">
			<img src="<%=place.imagen%>" class="img-fluid max-vh-100" alt="picture of place">
		</div>
		<div class="col-md-4">
			<div class="card h-100">
				<div class="card-body ">
					<h5 class="card-title border-bottom border-dark pb-1"><%=place.lugar%></h5>
					<p class="card-text"><%=place.descripcion%></p>
				</div>	
			</div>
		</div>
	</div>
	<div class="row justify-content-end">
		<div class="col-md-4 form-inline text-end m-1 ">
			<a href="/places/<%=place._id%>/edit" class="w-25 mx-1">
				<button class="btn btn-outline-primary btn-sm w-100">Edit</button>
			</a>	
			<form action="/places/<%=place._id%>?_method=DELETE" method="POST"  class="w-25">
				<button type="submit" class="btn btn-outline-danger btn-sm w-100">Delete</button>
			</form>	
		</div>
    </div>
	

	<div class="row mt-3">
		<a href="/places/<%= place._id %>/comments/new">
			<button class="btn btn-success btn-sm mb-4">
				Add Comment
			</button>
		</a>
	</div>
	
	<% comments.forEach((comment)=>{ %>
		<div class="row py-2 border" >
			<div class="col-2 my-auto border-end">
				<%= comment.user.username %>
			</div>
			<div class="col-2 my-auto d-flex flex-wrap justify-content-center border-end">
				<a class="btn btn-sm btn-success w-75 p-0 my-1" 
				   href="/places/<%=place._id%>/comments/<%=comment._id%>/edit">
					Edit
				</a>
				<form class="w-75 my-0" 
					  action="/places/<%= place._id %>/comments/<%= comment._id%>?_method=DELETE" method="POST">
					<button class="btn btn-sm btn-danger w-100 p-0">
						Delete
					</button>
				</form>
			</div>
			<div class="col-8 my-auto">
				<%= comment.text %>
			</div>
		</div>
	<% }) %>
	<div class="p-5"></div>
</div>

<%- include('./partials/footer'); %> <!--  partial included here -->